{% extends "layout.html" %}

{% block title %}{% if !policy_name.is_empty() %}Edit{% else %}Create{% endif %}
Policy - Crabcakes Admin{% endblock %}

{% block content %}
<div class="breadcrumb">
    <h1><a href="/admin/policies">Policies</a> / {% if !policy_name.is_empty()
        %}Edit {{ policy_name }}{% else %}Create New{% endif %}</h1>
</div>
<div class="error-notification error-notification-hide" id="error-notification"></div>

<form id="policy-form">
    <input type="hidden" id="policy-action" name="policy-action" value="{{ action.as_ref() }}" />
    <div class="form-group">
        <label for="policy-name">Policy Name:</label>
        <input type="text" id="policy-name" name="policy-name"
            value="{{ policy_name }}" {% if action.is_edit() %}readonly{%
            endif %} required>
    </div>

    <div class="form-group">
        <label for="policy-json">Policy JSON</label>
        <textarea id="policy-json" name="policy-json" rows="20" required>{{ policy_json }}</textarea>
    </div>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Save Policy</button>
        <a
            href="{% if action.is_edit() %}/admin/policies/view/{{ policy_name }}{% else %}/admin/policies{% endif %}"
            class="btn btn-secondary">Cancel</a>
    </div>
</form>
{% endblock %}

{% block extra_scripts %}
<script src="/admin/static/js/policy-crud.js"></script>
{% endblock %}
